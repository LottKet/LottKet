<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Cart">
    <insert id="insertCart" parameterType="java.util.Map">
        insert into cart(userid, productid, amount)
        values(#{userId}, #{productId}, #{amount})
        <!-- 상품 상세에서 장바구니 추가 버튼 누르면 추가되는 식으로 -->
    </insert>
    <update id="updateCartPlus" parameterType="java.lang.Integer">
        update cart set amount = amount + 1 where cartId = #{cartId}
    </update>
    <update id="updateCartMinus" parameterType="java.lang.Integer">
        update cart set amount = amount - 1 where cardid = #{cartId}
    </update>

    <delete id="deleteCart" parameterType="java.lang.Integer">
        delete from cart where cardid = #{cartId}
    </delete>

    <select id="selectCart" parameterType="java.lang.Integer">
        select p.producttitle, c.amount
        from cart c, product p, user u
        where u.userid = #{userId} AND c.userid = u.userid AND c.productid = p.productid
    </select>

</mapper>